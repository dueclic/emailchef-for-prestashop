var PS_Emailchef=(n=>{var i="ps_emailchef",c={};return{loginPage:function(){var t=document.getElementById("showPassword"),e=document.getElementById("hidePassword"),s=document.getElementById("consumer_secret");t&&t.addEventListener("click",function(){s.setAttribute("type","text"),t.style.display="none",e.style.display="flex"});e&&e.addEventListener("click",function(){s.setAttribute("type","password"),t.style.display="flex",e.style.display="none"})},settings:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];c=t,n(document).on("click","#"+i+"_create_list",function(t){t.preventDefault(),n(".ecps-new-list-container").toggle()}),n(document).on("click",".ecps-new-list-container #"+i+"_undo_save",function(t){t.preventDefault(),n(".ecps-new-list-container").hide()}),n(document).on("click",".ecps-new-list-container #"+i+"_new_save",function(t){var s,e,a;t.preventDefault(),n(this).attr("disabled","disabled"),s=n("#"+i+"_new_name").val(),t=n("#"+i+"_new_description").val(),n(".ecps-new-list-container button").prop("disabled",!0),t={action:"emailchefaddlist",list_name:s,list_desc:t},e=n(".ecps-new-list-container").data("ajax-url"),a=n("#"+i+"_list"),n(".status-list").hide(),n(".check-list").show(),n.ajax({type:"POST",url:e,data:t,dataType:"json",success:function(t){var e;"error"==t.type?(n(".status-list").hide(),n("#error_status_list_data").find(".reason").text(t.msg),n("#error_status_list_data").show()):(n(".ecps-new-list-container #"+i+"_new_save").text(c.create_list),n("#success_status_list_data").show().delay(3e3).fadeOut(),void 0!==t.list_id&&(a.append(n("<option>").text(s).attr("value",t.list_id)),a.val(t.list_id).attr("selected","selected")),t=t.list_id,n(".ecps-new-list-container button").prop("disabled",!0),t={action:"emailchefaddcustomfields",list_id:t},e=n(".ecps-new-list-container").data("ajax-url"),n(".status-list-cf").hide(),n(".check-list-cf").show(),n.ajax({type:"POST",url:e,data:t,dataType:"json",success:function(t){"error"==t.type?(n(".status-list-cf").hide(),n("#error_status_list_data_cf").find(".reason").text(t.msg),n("#error_status_list_data_cf").show()):(n("#success_status_list_data_cf").show().delay(3e3).fadeOut(),n(".ecps-new-list-container").slideUp())},error:function(t,e,s){n("#error_status_list_data_cf").find(".reason").text(t.error+" "+e+" "+s),n("#server_error_status_list_data_cf").show(),n(".ecps-new-list-container button").prop("disabled",!1)},complete:function(){n(".check-list-cf").hide(),n(".ecps-new-list-container button").prop("disabled",!1)}}))},error:function(t,e,s){n("#error_status_list_data").find(".reason").text(t.error+" "+e+" "+s),n("#server_error_status_list_data").show()},complete:function(){n(".check-list").hide(),n(".ecps-new-list-container button").prop("disabled",!1)}})}),n(document).on("click","#"+i+"_sync_now",function(t){t.preventDefault(),s()}),n(document).on("click","#emailchef-disconnect",function(t){var a;t.preventDefault(),confirm(c.are_you_sure_disconnect)&&((a=n("#emailchef-disconnect")).prop("disabled",!0),t=a.data("ajax-url"),n.ajax({type:"POST",url:t,data:{action:"emailchefdisconnect"},dataType:"json",success:function(t){window.location.reload()},error:function(t,e,s){a.prop("disabled",!1)},complete:function(){a.prop("disabled",!1)}}))}),e&&s(!0)}};function s(t){var e=0<arguments.length&&void 0!==t&&t,a=n("#"+i+"_sync_now"),t=(a.prop("disabled",!0),a.data("ajax-url"));n.ajax({type:"POST",url:t,data:{action:"emailchefsync"},dataType:"json",success:function(t){a.prop("disabled",!1),"success"!==t.status||e||alert(t.msg)},error:function(t,e,s){a.prop("disabled",!1)},complete:function(){a.prop("disabled",!1)}})}})(jQuery);